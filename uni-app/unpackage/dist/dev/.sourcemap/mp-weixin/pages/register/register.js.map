{"version":3,"file":"register.js","sources":["pages/register/register.vue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmVnaXN0ZXIvcmVnaXN0ZXIudnVl"],"sourcesContent":["<template>\n\t<view class=\"viewport\">\n\t\t<view class=\"bg-shape shape-1\"></view>\n\t\t<view class=\"bg-shape shape-2\"></view>\n\t\t\n\t\t<view class=\"container\">\n\t\t\t<view class=\"register-card\">\n\t\t\t\t<view class=\"back-icon\" @click=\"toLogin\">\n\t\t\t\t\t<text class=\"arrow\">〈</text>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"card-header\">\n\t\t\t\t\t<text class=\"main-title\">创建新账号</text>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"form-area\">\n\t\t\t\t\t<view class=\"input-item\" :class=\"{ 'is-focus': active === 'email' }\">\n\t\t\t\t\t\t<text class=\"input-label\">电子邮箱</text>\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\tv-model=\"email\" \n\t\t\t\t\t\t\tplaceholder=\"请输入邮箱地址\" \n\t\t\t\t\t\t\t@focus=\"active = 'email'\" \n\t\t\t\t\t\t\t@blur=\"active = ''\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"code-row\">\n\t\t\t\t\t\t<view class=\"input-item code-input\" :class=\"{ 'is-focus': active === 'code' }\">\n\t\t\t\t\t\t\t<text class=\"input-label\">验证码</text>\n\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\ttype=\"number\" \n\t\t\t\t\t\t\t\tv-model=\"code\" \n\t\t\t\t\t\t\t\tplaceholder=\"4 位验证码\" \n\t\t\t\t\t\t\t\t@focus=\"active = 'code'\" \n\t\t\t\t\t\t\t\t@blur=\"active = ''\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\tclass=\"standalone-code-btn\" \n\t\t\t\t\t\t\t:class=\"{ 'disabled': counting }\"\n\t\t\t\t\t\t\t@click=\"getCode\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ codeBtnText }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"input-item\" :class=\"{ 'is-focus': active === 'user' }\">\n\t\t\t\t\t\t<text class=\"input-label\">用户名</text>\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\tv-model=\"username\" \n\t\t\t\t\t\t\tplaceholder=\"设置您的账户名称\" \n\t\t\t\t\t\t\t@focus=\"active = 'user'\" \n\t\t\t\t\t\t\t@blur=\"active = ''\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"input-item\" :class=\"{ 'is-focus': active === 'pass' }\">\n\t\t\t\t\t\t<text class=\"input-label\">账户密码</text>\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\tpassword \n\t\t\t\t\t\t\tv-model=\"password\" \n\t\t\t\t\t\t\tplaceholder=\"设置安全密码\" \n\t\t\t\t\t\t\t@focus=\"active = 'pass'\" \n\t\t\t\t\t\t\t@blur=\"active = ''\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"input-item\" :class=\"{ 'is-focus': active === 'confirm' }\">\n\t\t\t\t\t\t<text class=\"input-label\">确认密码</text>\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\tpassword \n\t\t\t\t\t\t\tv-model=\"confirm_password\" \n\t\t\t\t\t\t\tplaceholder=\"再次输入密码\" \n\t\t\t\t\t\t\t@focus=\"active = 'confirm'\" \n\t\t\t\t\t\t\t@blur=\"active = ''\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<button class=\"submit-button\" :loading=\"loading\" @click=\"register\">\n\t\t\t\t\t\t立即注册\n\t\t\t\t\t</button>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"card-footer\">\n\t\t\t\t\t<text>已经有账号了？</text>\n\t\t\t\t\t<text class=\"login-link\" @click=\"toLogin\">返回登录</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\temail: '',\n\t\t\t\tcode: '',\n\t\t\t\tusername: '',\n\t\t\t\tpassword: '',\n\t\t\t\tconfirm_password: '',\n\t\t\t\tcounting: false,\n\t\t\t\tcount: 60,\n\t\t\t\tcodeBtnText: '获取验证码',\n\t\t\t\tactive: '',\n\t\t\t\tloading: false,\n\t\t\t\tbaseUrl: 'http://127.0.0.1:8080'\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tasync getCode() {\n\t\t\t\tif (this.counting) return;\n\t\t\t\tif (!/^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/.test(this.email)) {\n\t\t\t\t\tuni.showToast({ title: '邮箱格式错误', icon: 'none' });\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.counting = true;\n\t\t\t\tthis.countDown();\n\t\t\t\tuni.request({\n\t\t\t\t\turl: `${this.baseUrl}/auth/code?email=${this.email}`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.statusCode === 200) {\n\t\t\t\t\t\t\tuni.showToast({ title: '已发送至邮箱' });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.showToast({ title: res.data.detail || '发送失败', icon: 'none' });\n\t\t\t\t\t\t\tthis.resetCountDown();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: () => {\n\t\t\t\t\t\tuni.showToast({ title: '请求失败', icon: 'none' });\n\t\t\t\t\t\tthis.resetCountDown();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tcountDown() {\n\t\t\t\tthis.codeBtnText = `${this.count}s`;\n\t\t\t\tthis.timer = setInterval(() => {\n\t\t\t\t\tthis.count--;\n\t\t\t\t\tthis.codeBtnText = `${this.count}s`;\n\t\t\t\t\tif (this.count <= 0) {\n\t\t\t\t\t\tclearInterval(this.timer);\n\t\t\t\t\t\tthis.resetCountDown();\n\t\t\t\t\t}\n\t\t\t\t}, 1000);\n\t\t\t},\n\t\t\tresetCountDown() {\n\t\t\t\tthis.counting = false;\n\t\t\t\tthis.count = 60;\n\t\t\t\tthis.codeBtnText = '获取验证码';\n\t\t\t\tif(this.timer) clearInterval(this.timer);\n\t\t\t},\n\t\t\tregister() {\n\t\t\t\tif (!this.email || !this.code || !this.username || !this.password || !this.confirm_password) {\n\t\t\t\t\treturn uni.showToast({ title: '请完善注册信息', icon: 'none' });\n\t\t\t\t}\n\t\t\t\tif (this.password !== this.confirm_password) {\n\t\t\t\t\treturn uni.showToast({ title: '两次密码不一致', icon: 'none' });\n\t\t\t\t}\n\t\t\t\tthis.loading = true;\n\t\t\t\tuni.request({\n\t\t\t\t\turl: `${this.baseUrl}/auth/register`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tusername: this.username,\n\t\t\t\t\t\tpassword: this.password,\n\t\t\t\t\t\tconfirm_password: this.confirm_password,\n\t\t\t\t\t\temail: this.email,\n\t\t\t\t\t\tcode: this.code\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.statusCode === 200) {\n\t\t\t\t\t\t\tuni.showToast({ title: '注册成功' });\n\t\t\t\t\t\t\tsetTimeout(() => this.toLogin(), 1500);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.showToast({ title: res.data.detail || '注册失败', icon: 'none' });\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: () => { this.loading = false; }\n\t\t\t\t});\n\t\t\t},\n\t\t\ttoLogin() { uni.navigateBack(); }\n\t\t}\n\t}\n</script>\n\n<style>\n.viewport {\n\tmin-height: 100vh;\n\tbackground-color: #f8fafc;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tpadding: 40rpx 0;\n}\n\n.bg-shape {\n\tposition: absolute;\n\tborder-radius: 50%;\n\tfilter: blur(80px);\n\tz-index: 0;\n}\n.shape-1 { top: -5%; right: -5%; width: 400rpx; height: 400rpx; background: rgba(0, 98, 255, 0.08); }\n.shape-2 { bottom: -5%; left: -5%; width: 500rpx; height: 500rpx; background: rgba(0, 198, 255, 0.06); }\n\n.container {\n\twidth: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\tz-index: 1;\n}\n\n.register-card {\n\tposition: relative; /* 必须设为 relative 以便返回标志定位 */\n\twidth: 90%;\n\tmax-width: 460px;\n\tbackground: #ffffff;\n\tborder-radius: 32rpx;\n\tpadding: 80rpx 60rpx 60rpx; /* 顶部多留一点 padding 给返回键 */\n\tbox-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.08);\n\tanimation: slideUp 0.6s ease-out;\n}\n\n/* 返回标志样式 */\n.back-icon {\n\tposition: absolute;\n\ttop: 30rpx;\n\tleft: 30rpx;\n\twidth: 60rpx;\n\theight: 60rpx;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tcursor: pointer;\n\tborder-radius: 50%;\n\ttransition: background 0.2s;\n}\n\n.back-icon:active {\n\tbackground-color: #f1f5f9;\n}\n\n.arrow {\n\tfont-size: 36rpx;\n\tcolor: #64748b;\n\tfont-weight: bold;\n}\n\n.card-header {\n\tmargin-bottom: 60rpx;\n}\n\n.main-title {\n\tfont-size: 52rpx;\n\tfont-weight: 700;\n\tcolor: #0f172a;\n\tdisplay: block;\n\ttext-align: center; \n}\n\n.input-label {\n\tfont-size: 30rpx;\n\tcolor: #1e293b;\n\tfont-weight: 600;\n\tmargin-bottom: 20rpx;\n\tdisplay: block;\n}\n\n.input-item {\n\tmargin-bottom: 45rpx;\n\tborder-bottom: 2px solid #f1f5f9;\n\ttransition: all 0.3s;\n\tpadding-bottom: 10rpx;\n}\n\n.is-focus {\n\tborder-bottom-color: #0062ff;\n}\n\ninput {\n\theight: 80rpx;\n\tfont-size: 32rpx;\n}\n\n.code-row {\n\tdisplay: flex;\n\talign-items: flex-end;\n\tgap: 20rpx;\n\tmargin-bottom: 45rpx;\n}\n\n.code-input {\n\tflex: 1;\n\tmargin-bottom: 0;\n}\n\n.standalone-code-btn {\n\theight: 90rpx;\n\tline-height: 90rpx;\n\tpadding: 0 30rpx;\n\tfont-size: 26rpx;\n\tbackground-color: #f1f5f9;\n\tcolor: #0062ff;\n\tborder-radius: 12rpx;\n\tborder: none;\n\twhite-space: nowrap;\n}\n\n.standalone-code-btn::after { border: none; }\n\n.submit-button {\n\twidth: 100%;\n\theight: 110rpx;\n\tline-height: 110rpx;\n\tbackground: #1e293b;\n\tcolor: white;\n\tborder-radius: 16rpx;\n\tfont-size: 32rpx;\n\tfont-weight: 600;\n\tmargin-top: 40rpx;\n}\n\n.card-footer {\n\tmargin-top: 60rpx;\n\ttext-align: center;\n\tfont-size: 28rpx;\n\tcolor: #64748b;\n}\n\n.login-link {\n\tcolor: #0062ff;\n\tmargin-left: 10rpx;\n\tfont-weight: 600;\n}\n\n@keyframes slideUp {\n\tfrom { opacity: 0; transform: translateY(40px); }\n\tto { opacity: 1; transform: translateY(0); }\n}\n</style>","import MiniProgramPage from 'D:/study/wyu_navigator/uni-app/pages/register/register.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AA+FC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,OAAO;AAAA,MACP,MAAM;AAAA,MACN,UAAU;AAAA,MACV,UAAU;AAAA,MACV,kBAAkB;AAAA,MAClB,UAAU;AAAA,MACV,OAAO;AAAA,MACP,aAAa;AAAA,MACb,QAAQ;AAAA,MACR,SAAS;AAAA,MACT,SAAS;AAAA,IACV;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,MAAM,UAAU;AACf,UAAI,KAAK;AAAU;AACnB,UAAI,CAAC,gDAAgD,KAAK,KAAK,KAAK,GAAG;AACtEA,sBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,OAAK,CAAG;AAC/C;AAAA,MACD;AACA,WAAK,WAAW;AAChB,WAAK,UAAS;AACdA,oBAAAA,MAAI,QAAQ;AAAA,QACX,KAAK,GAAG,KAAK,OAAO,oBAAoB,KAAK,KAAK;AAAA,QAClD,QAAQ;AAAA,QACR,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,eAAe,KAAK;AAC3BA,0BAAAA,MAAI,UAAU,EAAE,OAAO,SAAU,CAAA;AAAA,iBAC3B;AACNA,0BAAAA,MAAI,UAAU,EAAE,OAAO,IAAI,KAAK,UAAU,QAAQ,MAAM,OAAO,CAAC;AAChE,iBAAK,eAAc;AAAA,UACpB;AAAA,QACA;AAAA,QACD,MAAM,MAAM;AACXA,wBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,OAAK,CAAG;AAC7C,eAAK,eAAc;AAAA,QACpB;AAAA,MACD,CAAC;AAAA,IACD;AAAA,IACD,YAAY;AACX,WAAK,cAAc,GAAG,KAAK,KAAK;AAChC,WAAK,QAAQ,YAAY,MAAM;AAC9B,aAAK;AACL,aAAK,cAAc,GAAG,KAAK,KAAK;AAChC,YAAI,KAAK,SAAS,GAAG;AACpB,wBAAc,KAAK,KAAK;AACxB,eAAK,eAAc;AAAA,QACpB;AAAA,MACA,GAAE,GAAI;AAAA,IACP;AAAA,IACD,iBAAiB;AAChB,WAAK,WAAW;AAChB,WAAK,QAAQ;AACb,WAAK,cAAc;AACnB,UAAG,KAAK;AAAO,sBAAc,KAAK,KAAK;AAAA,IACvC;AAAA,IACD,WAAW;AACV,UAAI,CAAC,KAAK,SAAS,CAAC,KAAK,QAAQ,CAAC,KAAK,YAAY,CAAC,KAAK,YAAY,CAAC,KAAK,kBAAkB;AAC5F,eAAOA,cAAAA,MAAI,UAAU,EAAE,OAAO,WAAW,MAAM,OAAO,CAAC;AAAA,MACxD;AACA,UAAI,KAAK,aAAa,KAAK,kBAAkB;AAC5C,eAAOA,cAAAA,MAAI,UAAU,EAAE,OAAO,WAAW,MAAM,OAAO,CAAC;AAAA,MACxD;AACA,WAAK,UAAU;AACfA,oBAAAA,MAAI,QAAQ;AAAA,QACX,KAAK,GAAG,KAAK,OAAO;AAAA,QACpB,QAAQ;AAAA,QACR,MAAM;AAAA,UACL,UAAU,KAAK;AAAA,UACf,UAAU,KAAK;AAAA,UACf,kBAAkB,KAAK;AAAA,UACvB,OAAO,KAAK;AAAA,UACZ,MAAM,KAAK;AAAA,QACX;AAAA,QACD,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,eAAe,KAAK;AAC3BA,0BAAAA,MAAI,UAAU,EAAE,OAAO,OAAQ,CAAA;AAC/B,uBAAW,MAAM,KAAK,QAAS,GAAE,IAAI;AAAA,iBAC/B;AACNA,0BAAAA,MAAI,UAAU,EAAE,OAAO,IAAI,KAAK,UAAU,QAAQ,MAAM,OAAO,CAAC;AAAA,UACjE;AAAA,QACA;AAAA,QACD,UAAU,MAAM;AAAE,eAAK,UAAU;AAAA,QAAO;AAAA,MACzC,CAAC;AAAA,IACD;AAAA,IACD,UAAU;AAAEA,oBAAAA,MAAI,aAAY;AAAA,IAAI;AAAA,EACjC;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxLD,GAAG,WAAW,eAAe;"}