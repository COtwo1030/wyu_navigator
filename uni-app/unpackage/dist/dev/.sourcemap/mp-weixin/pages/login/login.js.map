{"version":3,"file":"login.js","sources":["pages/login/login.vue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vbG9naW4udnVl"],"sourcesContent":["<template>\n\t<view class=\"viewport\">\n\t\t<view class=\"bg-shape shape-1\"></view>\n\t\t<view class=\"bg-shape shape-2\"></view>\n\t\t\n\t\t<view class=\"container\">\n\t\t\t<view class=\"login-card\">\n\t\t\t\t<view class=\"card-header\">\n\t\t\t\t\t<text class=\"main-title\">欢迎登录</text>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"form-area\">\n\t\t\t\t\t<view class=\"input-item\" :class=\"{ 'is-focus': active === 'email' }\">\n\t\t\t\t\t\t<text class=\"input-label\">邮箱地址</text>\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\tv-model=\"email\" \n\t\t\t\t\t\t\tplaceholder=\"请输入您的邮箱\" \n\t\t\t\t\t\t\t@focus=\"active = 'email'\" \n\t\t\t\t\t\t\t@blur=\"active = ''\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"input-item\" :class=\"{ 'is-focus': active === 'pass' }\">\n\t\t\t\t\t\t<text class=\"input-label\">安全密码</text>\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\tpassword \n\t\t\t\t\t\t\tv-model=\"password\" \n\t\t\t\t\t\t\tplaceholder=\"请输入登录密码\" \n\t\t\t\t\t\t\t@focus=\"active = 'pass'\" \n\t\t\t\t\t\t\t@blur=\"active = ''\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"helper-line\">\n\t\t\t\t\t\t<text class=\"forget-link\" @click=\"toForget\">忘记密码？</text>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<button class=\"login-button\" :loading=\"loading\" @click=\"login\">\n\t\t\t\t\t\t登 录\n\t\t\t\t\t</button>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"card-footer\">\n\t\t\t\t\t<text>还没有账号？</text>\n\t\t\t\t\t<text class=\"reg-link\" @click=\"toRegister\">立即注册</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\temail: '',\n\t\t\t\tpassword: '',\n\t\t\t\tloading: false,\n\t\t\t\tactive: '',\n\t\t\t\tbaseUrl: 'http://127.0.0.1:8080'\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tasync login() {\n\t\t\t\tif (!this.email || !this.password) {\n\t\t\t\t\tuni.showToast({ title: '请完善登录信息', icon: 'none' });\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.loading = true;\n\t\t\t\t\n\t\t\t\tuni.request({\n\t\t\t\t\turl: `${this.baseUrl}/auth/login`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\temail: this.email,\n\t\t\t\t\t\tpassword: this.password\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.statusCode === 200) {\n\t\t\t\t\t\t\tuni.showToast({ title: '登录成功' });\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tlet payload = res.data;\n\t\t\t\t\t\t\t\tif (typeof payload === 'string') {\n\t\t\t\t\t\t\t\t\ttry { payload = JSON.parse(payload); } catch (e) {}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (payload && payload.token) {\n\t\t\t\t\t\t\t\t\tuni.setStorageSync('token', payload.token);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlet uname = '';\n\t\t\t\t\t\t\t\tif (payload && payload.username) {\n\t\t\t\t\t\t\t\t\tuname = payload.username;\n\t\t\t\t\t\t\t\t} else if (payload && payload.user && payload.user.username) {\n\t\t\t\t\t\t\t\t\tuname = payload.user.username;\n\t\t\t\t\t\t\t\t} else if (this.email) {\n\t\t\t\t\t\t\t\t\tconst idx = this.email.indexOf('@');\n\t\t\t\t\t\t\t\t\tuname = idx > 0 ? this.email.slice(0, idx) : this.email;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (uname) {\n\t\t\t\t\t\t\t\t\tuni.setStorageSync('username', uname);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t\t\tuni.reLaunch({ url: '/pages/index/index' });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.showToast({ title: res.data.detail || '登录失败', icon: 'none' });\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: () => {\n\t\t\t\t\t\tuni.showToast({ title: '服务器连接失败', icon: 'none' });\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\ttoRegister() {\n\t\t\t\tuni.navigateTo({ url: '/pages/register/register' });\n\t\t\t},\n\t\t\ttoForget() {\n\t\t\t\tuni.navigateTo({ url: '/pages/fgps/fgps' });\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n.viewport {\n\tmin-height: 100vh;\n\tbackground-color: #f8fafc;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tposition: relative;\n\toverflow: hidden;\n}\n\n.bg-shape {\n\tposition: absolute;\n\tborder-radius: 50%;\n\tfilter: blur(80px);\n\tz-index: 0;\n}\n.shape-1 { top: -10%; right: -10%; width: 500rpx; height: 500rpx; background: rgba(0, 98, 255, 0.08); }\n.shape-2 { bottom: -10%; left: -5%; width: 600rpx; height: 600rpx; background: rgba(0, 198, 255, 0.06); }\n\n.container {\n\twidth: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\tpadding: 40rpx;\n\tz-index: 1;\n}\n\n.login-card {\n\twidth: 100%;\n\tmax-width: 440px;\n\tbackground: #ffffff;\n\tborder-radius: 32rpx;\n\tpadding: 60rpx;\n\tbox-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.08);\n\tanimation: slideUp 0.6s ease-out;\n}\n\n.card-header {\n\ttext-align: left; /* 改为左对齐与注册页一致 */\n\tmargin-bottom: 60rpx;\n}\n\n.main-title {\n  font-size: 52rpx;\n  font-weight: 700;\n  color: #0f172a;\n  display: block;\n  /* 核心：文字水平居中 */\n  text-align: center; \n}\n\n.sub-title {\n\tfont-size: 28rpx;\n\tcolor: #64748b;\n\tmargin-top: 16rpx;\n\tdisplay: block;\n}\n\n/* 关键：放大标签大小 */\n.input-label {\n\tfont-size: 30rpx; \n\tcolor: #1e293b;\n\tfont-weight: 600;\n\tmargin-bottom: 20rpx;\n\tdisplay: block;\n}\n\n.input-item {\n\tmargin-bottom: 45rpx;\n\tborder-bottom: 2px solid #f1f5f9;\n\ttransition: all 0.3s;\n\tpadding-bottom: 10rpx;\n}\n\n.is-focus {\n\tborder-bottom-color: #0062ff;\n\ttransform: translateY(-2rpx);\n}\n\ninput {\n\theight: 80rpx;\n\tfont-size: 32rpx;\n\tcolor: #334155;\n}\n\n.helper-line {\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\tmargin-top: -10rpx;\n\tmargin-bottom: 60rpx;\n}\n\n.forget-link {\n\tfont-size: 26rpx;\n\tcolor: #0062ff;\n}\n\n.login-button {\n\twidth: 100%;\n\theight: 110rpx;\n\tline-height: 110rpx;\n\tbackground: #1e293b;\n\tcolor: #ffffff;\n\tborder-radius: 16rpx;\n\tfont-size: 32rpx;\n\tfont-weight: 600;\n\tborder: none;\n}\n\n.login-button:active {\n\ttransform: scale(0.98);\n}\n\n.card-footer {\n\tmargin-top: 60rpx;\n\ttext-align: center;\n\tfont-size: 28rpx;\n\tcolor: #64748b;\n}\n\n.reg-link {\n\tcolor: #0062ff;\n\tmargin-left: 10rpx;\n\tfont-weight: 600;\n}\n\n@keyframes slideUp {\n\tfrom { opacity: 0; transform: translateY(40px); }\n\tto { opacity: 1; transform: translateY(0); }\n}\n</style>\n","import MiniProgramPage from 'D:/study/wyu_navigator/uni-app/pages/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAqDC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,OAAO;AAAA,MACP,UAAU;AAAA,MACV,SAAS;AAAA,MACT,QAAQ;AAAA,MACR,SAAS;AAAA,IACV;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,MAAM,QAAQ;AACb,UAAI,CAAC,KAAK,SAAS,CAAC,KAAK,UAAU;AAClCA,sBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,OAAK,CAAG;AAChD;AAAA,MACD;AACA,WAAK,UAAU;AAEfA,oBAAAA,MAAI,QAAQ;AAAA,QACX,KAAK,GAAG,KAAK,OAAO;AAAA,QACpB,QAAQ;AAAA,QACR,MAAM;AAAA,UACL,OAAO,KAAK;AAAA,UACZ,UAAU,KAAK;AAAA,QACf;AAAA,QACD,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,eAAe,KAAK;AAC3BA,0BAAAA,MAAI,UAAU,EAAE,OAAO,OAAQ,CAAA;AAC/B,gBAAI;AACH,kBAAI,UAAU,IAAI;AAClB,kBAAI,OAAO,YAAY,UAAU;AAChC,oBAAI;AAAE,4BAAU,KAAK,MAAM,OAAO;AAAA,gBAAK,SAAO,GAAG;AAAA,gBAAC;AAAA,cACnD;AACA,kBAAI,WAAW,QAAQ,OAAO;AAC7BA,8BAAAA,MAAI,eAAe,SAAS,QAAQ,KAAK;AAAA,cAC1C;AACA,kBAAI,QAAQ;AACZ,kBAAI,WAAW,QAAQ,UAAU;AAChC,wBAAQ,QAAQ;AAAA,yBACN,WAAW,QAAQ,QAAQ,QAAQ,KAAK,UAAU;AAC5D,wBAAQ,QAAQ,KAAK;AAAA,cACtB,WAAW,KAAK,OAAO;AACtB,sBAAM,MAAM,KAAK,MAAM,QAAQ,GAAG;AAClC,wBAAQ,MAAM,IAAI,KAAK,MAAM,MAAM,GAAG,GAAG,IAAI,KAAK;AAAA,cACnD;AACA,kBAAI,OAAO;AACVA,8BAAAA,MAAI,eAAe,YAAY,KAAK;AAAA,cACrC;AAAA,qBACQ,GAAG;AAAA,YAAC;AACbA,0BAAAA,MAAI,SAAS,EAAE,KAAK,qBAAsB,CAAA;AAAA,iBACpC;AACNA,0BAAAA,MAAI,UAAU,EAAE,OAAO,IAAI,KAAK,UAAU,QAAQ,MAAM,OAAO,CAAC;AAAA,UACjE;AAAA,QACA;AAAA,QACD,MAAM,MAAM;AACXA,wBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,OAAK,CAAG;AAAA,QAChD;AAAA,QACD,UAAU,MAAM;AACf,eAAK,UAAU;AAAA,QAChB;AAAA,MACD,CAAC;AAAA,IACD;AAAA,IACD,aAAa;AACZA,oBAAAA,MAAI,WAAW,EAAE,KAAK,2BAA4B,CAAA;AAAA,IAClD;AAAA,IACD,WAAW;AACVA,oBAAAA,MAAI,WAAW,EAAE,KAAK,mBAAoB,CAAA;AAAA,IAC3C;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;ACzHD,GAAG,WAAW,eAAe;"}