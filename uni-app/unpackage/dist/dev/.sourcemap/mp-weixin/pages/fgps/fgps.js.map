{"version":3,"file":"fgps.js","sources":["pages/fgps/fgps.vue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZmdwcy9mZ3BzLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"viewport\">\r\n\t\t<view class=\"bg-shape shape-1\"></view>\r\n\t\t<view class=\"bg-shape shape-2\"></view>\r\n\t\t\r\n\t\t<view class=\"container\">\r\n\t\t\t<view class=\"register-card\">\r\n\t\t\t\t<view class=\"back-icon\" @click=\"toLogin\">\r\n\t\t\t\t\t<text class=\"arrow\">〈</text>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"card-header\">\r\n\t\t\t\t\t<text class=\"main-title\">重置密码</text>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"form-area\">\r\n\t\t\t\t\t<view class=\"input-item\" :class=\"{ 'is-focus': active === 'email' }\">\r\n\t\t\t\t\t\t<text class=\"input-label\">电子邮箱</text>\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\tv-model=\"email\" \r\n\t\t\t\t\t\t\tplaceholder=\"请输入邮箱地址\" \r\n\t\t\t\t\t\t\t@focus=\"active = 'email'\" \r\n\t\t\t\t\t\t\t@blur=\"active = ''\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"code-row\">\r\n\t\t\t\t\t\t<view class=\"input-item code-input\" :class=\"{ 'is-focus': active === 'code' }\">\r\n\t\t\t\t\t\t\t<text class=\"input-label\">验证码</text>\r\n\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\ttype=\"number\" \r\n\t\t\t\t\t\t\t\tv-model=\"code\" \r\n\t\t\t\t\t\t\t\tplaceholder=\"4 位验证码\" \r\n\t\t\t\t\t\t\t\t@focus=\"active = 'code'\" \r\n\t\t\t\t\t\t\t\t@blur=\"active = ''\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<button \r\n\t\t\t\t\t\t\tclass=\"standalone-code-btn\" \r\n\t\t\t\t\t\t\t:class=\"{ 'disabled': counting }\"\r\n\t\t\t\t\t\t\t@click=\"getCode\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{{ codeBtnText }}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"input-item\" :class=\"{ 'is-focus': active === 'pass' }\">\r\n\t\t\t\t\t\t<text class=\"input-label\">新密码</text>\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\tpassword \r\n\t\t\t\t\t\t\tv-model=\"password\" \r\n\t\t\t\t\t\t\tplaceholder=\"设置新密码\" \r\n\t\t\t\t\t\t\t@focus=\"active = 'pass'\" \r\n\t\t\t\t\t\t\t@blur=\"active = ''\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"input-item\" :class=\"{ 'is-focus': active === 'confirm' }\">\r\n\t\t\t\t\t\t<text class=\"input-label\">确认密码</text>\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\tpassword \r\n\t\t\t\t\t\t\tv-model=\"confirm_password\" \r\n\t\t\t\t\t\t\tplaceholder=\"再次输入密码\" \r\n\t\t\t\t\t\t\t@focus=\"active = 'confirm'\" \r\n\t\t\t\t\t\t\t@blur=\"active = ''\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<button class=\"submit-button\" :loading=\"loading\" @click=\"resetPassword\">\r\n\t\t\t\t\t\t确认重置\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"card-footer\">\r\n\t\t\t\t\t<text>记起密码了？</text>\r\n\t\t\t\t\t<text class=\"login-link\" @click=\"toLogin\">返回登录</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\temail: '',\r\n\t\t\t\tcode: '',\r\n\t\t\t\tpassword: '',\r\n\t\t\t\tconfirm_password: '',\r\n\t\t\t\tcounting: false,\r\n\t\t\t\tcount: 60,\r\n\t\t\t\tcodeBtnText: '获取验证码',\r\n\t\t\t\tactive: '',\r\n\t\t\t\tloading: false,\r\n\t\t\t\tbaseUrl: 'http://127.0.0.1:8080'\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync getCode() {\r\n\t\t\t\tif (this.counting) return;\r\n\t\t\t\tif (!/^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/.test(this.email)) {\r\n\t\t\t\t\tuni.showToast({ title: '邮箱格式错误', icon: 'none' });\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.counting = true;\r\n\t\t\t\tthis.countDown();\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: `${this.baseUrl}/auth/code?email=${this.email}`,\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\t\tuni.showToast({ title: '已发送至邮箱' });\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({ title: res.data.detail || '发送失败', icon: 'none' });\r\n\t\t\t\t\t\t\tthis.resetCountDown();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\tuni.showToast({ title: '请求失败', icon: 'none' });\r\n\t\t\t\t\t\tthis.resetCountDown();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcountDown() {\r\n\t\t\t\tthis.codeBtnText = `${this.count}s`;\r\n\t\t\t\tthis.timer = setInterval(() => {\r\n\t\t\t\t\tthis.count--;\r\n\t\t\t\t\tthis.codeBtnText = `${this.count}s`;\r\n\t\t\t\t\tif (this.count <= 0) {\r\n\t\t\t\t\t\tclearInterval(this.timer);\r\n\t\t\t\t\t\tthis.resetCountDown();\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 1000);\r\n\t\t\t},\r\n\t\t\tresetCountDown() {\r\n\t\t\t\tthis.counting = false;\r\n\t\t\t\tthis.count = 60;\r\n\t\t\t\tthis.codeBtnText = '获取验证码';\r\n\t\t\t\tif(this.timer) clearInterval(this.timer);\r\n\t\t\t},\r\n\t\t\tresetPassword() {\r\n\t\t\t\tif (!this.email || !this.code || !this.password || !this.confirm_password) {\r\n\t\t\t\t\treturn uni.showToast({ title: '请完善信息', icon: 'none' });\r\n\t\t\t\t}\r\n\t\t\t\tif (this.password !== this.confirm_password) {\r\n\t\t\t\t\treturn uni.showToast({ title: '两次密码不一致', icon: 'none' });\r\n\t\t\t\t}\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: `${this.baseUrl}/auth/reset-password`,\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tpassword: this.password,\r\n\t\t\t\t\t\tconfirm_password: this.confirm_password,\r\n\t\t\t\t\t\temail: this.email,\r\n\t\t\t\t\t\tcode: this.code\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\t\tuni.showToast({ title: '重置成功' });\r\n\t\t\t\t\t\t\tsetTimeout(() => this.toLogin(), 1500);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({ title: res.data.detail || '重置失败', icon: 'none' });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: () => { this.loading = false; }\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\ttoLogin() { uni.navigateBack(); }\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n.viewport {\r\n\tmin-height: 100vh;\r\n\tbackground-color: #f8fafc;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tpadding: 40rpx 0;\r\n}\r\n\r\n.bg-shape {\r\n\tposition: absolute;\r\n\tborder-radius: 50%;\r\n\tfilter: blur(80px);\r\n\tz-index: 0;\r\n}\r\n.shape-1 { top: -5%; right: -5%; width: 400rpx; height: 400rpx; background: rgba(0, 98, 255, 0.08); }\r\n.shape-2 { bottom: -5%; left: -5%; width: 500rpx; height: 500rpx; background: rgba(0, 198, 255, 0.06); }\r\n\r\n.container {\r\n\twidth: 100%;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\tz-index: 1;\r\n}\r\n\r\n.register-card {\r\n\tposition: relative;\r\n\twidth: 90%;\r\n\tmax-width: 460px;\r\n\tbackground: #ffffff;\r\n\tborder-radius: 32rpx;\r\n\tpadding: 80rpx 60rpx 60rpx;\r\n\tbox-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.08);\r\n\tanimation: slideUp 0.6s ease-out;\r\n}\r\n\r\n.back-icon {\r\n\tposition: absolute;\r\n\ttop: 30rpx;\r\n\tleft: 30rpx;\r\n\twidth: 60rpx;\r\n\theight: 60rpx;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tcursor: pointer;\r\n\tborder-radius: 50%;\r\n\ttransition: background 0.2s;\r\n}\r\n\r\n.back-icon:active {\r\n\tbackground-color: #f1f5f9;\r\n}\r\n\r\n.arrow {\r\n\tfont-size: 36rpx;\r\n\tcolor: #64748b;\r\n\tfont-weight: bold;\r\n}\r\n\r\n.card-header {\r\n\tmargin-bottom: 60rpx;\r\n}\r\n\r\n.main-title {\r\n\tfont-size: 52rpx;\r\n\tfont-weight: 700;\r\n\tcolor: #0f172a;\r\n\tdisplay: block;\r\n\ttext-align: center; \r\n}\r\n\r\n.input-label {\r\n\tfont-size: 30rpx;\r\n\tcolor: #1e293b;\r\n\tfont-weight: 600;\r\n\tmargin-bottom: 20rpx;\r\n\tdisplay: block;\r\n}\r\n\r\n.input-item {\r\n\tmargin-bottom: 45rpx;\r\n\tborder-bottom: 2px solid #f1f5f9;\r\n\ttransition: all 0.3s;\r\n\tpadding-bottom: 10rpx;\r\n}\r\n\r\n.is-focus {\r\n\tborder-bottom-color: #0062ff;\r\n}\r\n\r\ninput {\r\n\theight: 80rpx;\r\n\tfont-size: 32rpx;\r\n}\r\n\r\n.code-row {\r\n\tdisplay: flex;\r\n\talign-items: flex-end;\r\n\tgap: 20rpx;\r\n\tmargin-bottom: 45rpx;\r\n}\r\n\r\n.code-input {\r\n\tflex: 1;\r\n\tmargin-bottom: 0;\r\n}\r\n\r\n.standalone-code-btn {\r\n\theight: 90rpx;\r\n\tline-height: 90rpx;\r\n\tpadding: 0 30rpx;\r\n\tfont-size: 26rpx;\r\n\tbackground-color: #f1f5f9;\r\n\tcolor: #0062ff;\r\n\tborder-radius: 12rpx;\r\n\tborder: none;\r\n\twhite-space: nowrap;\r\n}\r\n\r\n.standalone-code-btn::after { border: none; }\r\n\r\n.submit-button {\r\n\twidth: 100%;\r\n\theight: 110rpx;\r\n\tline-height: 110rpx;\r\n\tbackground: #1e293b;\r\n\tcolor: white;\r\n\tborder-radius: 16rpx;\r\n\tfont-size: 32rpx;\r\n\tfont-weight: 600;\r\n\tmargin-top: 40rpx;\r\n}\r\n\r\n.card-footer {\r\n\tmargin-top: 60rpx;\r\n\ttext-align: center;\r\n\tfont-size: 28rpx;\r\n\tcolor: #64748b;\r\n}\r\n\r\n.login-link {\r\n\tcolor: #0062ff;\r\n\tmargin-left: 10rpx;\r\n\tfont-weight: 600;\r\n}\r\n\r\n@keyframes slideUp {\r\n\tfrom { opacity: 0; transform: translateY(40px); }\r\n\tto { opacity: 1; transform: translateY(0); }\r\n}\r\n</style>","import MiniProgramPage from 'D:/study/wyu_navigator/uni-app/pages/fgps/fgps.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":"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"}