<navigation-bar extClass="nav-default" title="{{'我点赞的'}}" back="{{true}}" color="black" background="#FFF" animated="{{false}}"></navigation-bar>
<view class="mylikes">
  <scroll-view scroll-y class="list" lower-threshold="80" bindscrolltolower="onScrollToLower">
    <block wx:for="{{articles}}" wx:key="id">
      <view class="card" bindtap="onCardTap" data-id="{{item.id}}">
        <view class="header">
          <image class="avatar" src="{{item.avatar || '/images/tabbar/avator.png'}}" mode="aspectFill"></image>
          <view class="header-right">
            <view class="top-row">
              <text class="username">{{item.username}}</text>
              <text class="time">{{item.create_time}}</text>
            </view>
            <view class="meta" wx:if="{{item.genderIcon || item.yearText}}">
              <image wx:if="{{item.genderIcon}}" class="gender-icon" src="/images/tabbar/{{item.genderIcon}}" mode="aspectFit"></image>
              <view wx:if="{{item.yearText}}" class="year-badge">{{item.yearText}}</view>
            </view>
          </view>
        </view>
        <view wx:if="{{item.tag}}" class="tag">#{{item.tag}}</view>
        <view class="content">{{item.content}}</view>
        <block wx:if="{{item.imgs && item.imgs.length}}">
          <view class="imgs-grid">
            <block wx:for="{{item.imgs}}" wx:key="*this" wx:for-item="img" wx:for-index="idx">
              <view wx:if="{{idx < 3}}" class="img-wrap" catchtap="onPreviewImages" data-id="{{item.id}}" data-idx="{{idx}}">
                <image class="img-item" src="{{img}}" mode="aspectFill"></image>
                <view wx:if="{{idx === 2 && item.imgs.length > 3}}" class="more-mask">+{{item.imgs.length - 3}}</view>
              </view>
            </block>
          </view>
        </block>
        <view class="metrics">
          <view class="metric">
            <image class="metric-icon" src="/images/tabbar/look.png" mode="aspectFit"></image>
            <text wx:if="{{item.view_count}}" class="metric-num">{{item.view_count}}</text>
          </view>
          <view class="metrics-right">
            <view class="metric" catchtap="onLikeArticleTap" data-id="{{item.id}}">
              <image class="metric-icon" src="{{item.liked ? '/images/tabbar/liked.png' : '/images/tabbar/like.png'}}" mode="aspectFit"></image>
              <text wx:if="{{item.like_count}}" class="metric-num">{{item.like_count}}</text>
            </view>
            <view class="metric" catchtap="onCommentTap" data-id="{{item.id}}">
              <image class="metric-icon" src="{{item.commented ? '/images/tabbar/commented.png' : '/images/tabbar/comment.png'}}" mode="aspectFit"></image>
              <text wx:if="{{item.comment_count}}" class="metric-num">{{item.comment_count}}</text>
            </view>
          </view>
        </view>
      </view>
    </block>
    <view class="footer">
      <view wx:if="{{loading}}" class="loading">加载中...</view>
      <view wx:if="{{!hasMore && articles.length}}" class="nomore">没有更多了</view>
    </view>
  </scroll-view>
</view>
